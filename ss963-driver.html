<script tpe="text/javascript">

    RED.nodes.registerType('ss963-driver',{
        category: 'Raspberry Pi',
        color: '#FDF0C2',
        defaults: {
			configName: 	{value:"", 		required: true},
            portCount:      {value:96,      required:true, validate:RED.validators.number()},
            latchPin:       {value:2,       required:true, validate:RED.validators.number()},
            latchDelay:     {value:"0",     required:true, validate:RED.validators.number()},
            speed:          {value:4000000, required:true, validate:RED.validators.number()},
            loopDelayUs:    {value:100,     required:true, validate:RED.validators.number()}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-flash",
		paletteLabel: "SS963",
        label: function() {
            return this.name ||  "SS963 Service";
        },
		oneditsave: function() {
				
		},		
		oneditprepare: function() {
            $.getJSON('getServiceConfFile', function(confFile) {
				$("#node-input-portCount").val(confFile.PORT_COUNT);
				$("#node-input-latchPin").val(confFile.LATCH_PIN);
				$("#node-input-latchDelay").val(confFile.LATCH_DELAY);
				$("#node-input-speed").val(confFile.SPEED);
				$("#node-input-loopDelayUs").val(confFile.LOOP_DELAY_US);
                console.log(data);
            });			 
		}
	});
</script>

<script type="text/html" data-template-name="ss963-driver">
    <div class="form-row">
        <label for="node-input-configName"><i class="icon-tag"></i>Name</label>
        <input type="text" id="node-input-configName" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-portCount"><i class="icon-bookmark"></i> Port Count</label>
        <input type="text" id="node-input-portCount">
    </div>
    <div class="form-row">
        <label for="node-input-latchPin"><i class="icon-bookmark"></i> Latch Pin</label>
        <input type="text" id="node-input-latchPin">
    </div>
    <div class="form-row">
        <label for="node-input-latchDelay"><i class="icon-bookmark"></i> Latch Delay</label>
        <input type="text" id="node-input-latchDelay">
    </div>
    <div class="form-row">
        <label for="node-input-speed"><i class="icon-bookmark"></i> Speed </label>
        <input type="text" id="node-input-speed">
    </div>
    <div class="form-row">
        <label for="node-input-loopDelayUs"><i class="icon-bookmark"></i> Loop Delay</label>
        <input type="text" id="node-input-loopDelayUs">
    </div>
</script>
